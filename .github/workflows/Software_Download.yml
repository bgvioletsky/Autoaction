name: Software Download link

on:
  workflow_dispatch:
  # 增加定时任务触发
  schedule:
    - cron: '0 0 * * *'  # 每天凌晨执行一次

jobs:
  build:
    name: Software Download link
    runs-on: ubuntu-latest
    # env:
    #   OUTPUT_FILE: "bg.md"
      
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.x"
      
      # - name: Create Markdown file
      #   run: |
      #     echo "*bold* text" > ${{ env.OUTPUT_FILE }}
      #     echo "_italic text_" >> ${{ env.OUTPUT_FILE }}
      #     echo "[inline URL](http://www.example.com/)" >> ${{ env.OUTPUT_FILE }}

      - name: Send Markdown to Telegram
        run: |         
          curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendMessage" \
            -d "chat_id=${{ secrets.TELEGRAM_ID }}" \
            -d "text=$(cat ./message/alist.md)" \
            -d "parse_mode=MarkdownV2"