name: Software Download link

on:
  workflow_dispatch:
  # 增加定时任务触发
  schedule:
    - cron: '0 0 * * *'  # 每天凌晨执行一次

jobs:
  build:
    name: Software Download link
    runs-on: ubuntu-latest
    env:
      OUTPUT_FILE: "bg.md"
      TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
      TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_ID }}

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.x"
      
      - name: Create Markdown file
        run: |
          echo "*bold* text" > ${{ env.OUTPUT_FILE }}
          echo "_italic text_" >> ${{ env.OUTPUT_FILE }}
          echo "[inline URL](http://www.example.com/)" >> ${{ env.OUTPUT_FILE }}

      - name: Call Send Markdown to Telegram Workflow
        uses: ./.github/workflows/send-markdown.yml
        with:
          markdown_file: '${{ env.OUTPUT_FILE }}'
        