name: Send Markdown to Telegram

on:
  workflow_call:
    inputs:
      markdown_file:
        description: 'Path to the Markdown file to send'
        required: true
        type: string
    secrets:
      TELEGRAM_BOT_TOKEN:
        required: true
      TELEGRAM_CHAT_ID:
        required: true

jobs:
  send-message:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        
      - name: Send Markdown to Telegram
        run: |
          if [ ! -f "${{ inputs.markdown_file }}" ]; then
            echo "File not found: ${{ inputs.markdown_file }}"
            exit 1
          fi
          
          curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -F chat_id=${{ secrets.TELEGRAM_CHAT_ID }} \
            -F text=@${{ inputs.markdown_file }} \
            -F parse_mode=Markdown
